# Jira Agile Metrics - Cursor Rules

This file provides a quick reference. For detailed documentation, see the `.cursor/` directory:

- **`.cursor/overview.md`** - Project overview, features, and quick start
- **`.cursor/architecture.md`** - Technical architecture and implementation details
- **`.cursor/development.md`** - Development workflow and code style guidelines
- **`.cursor/api.md`** - API reference documentation
- **`.cursor/patterns.md`** - Common patterns and best practices
- **`.cursor/testing.md`** - Testing guidelines and patterns

## Quick Reference

### Project Overview

Jira Agile Metrics is a Python tool for extracting Agile metrics and charts from JIRA projects and Trello boards.

**Key Components:**
- `jira_agile_metrics/cli.py` - Command-line interface
- `jira_agile_metrics/webapp/app.py` - Flask web application
- `jira_agile_metrics/calculator.py` - Calculator orchestrator
- `jira_agile_metrics/calculators/` - Individual metric calculators

### Calculator Pattern

All calculators inherit from `Calculator` base class:

```python
class Calculator:
    def __init__(self, query_manager, settings, results):
        self.query_manager = query_manager
        self.settings = settings
        self._results = results
    
    def run(self, now=None):
        """Calculate and return results."""
        pass
    
    def write(self):
        """Write output files."""
        pass
```

### Code Style

- **Line length**: 88 characters (Black default)
- **Formatting**: Use `black` and `ruff`
- **Type hints**: Use where appropriate
- **Docstrings**: Google-style for public APIs

### Testing

- **Unit tests**: `{module}_test.py` alongside source files
- **Functional tests**: `tests/functional/`
- **E2E tests**: `tests/e2e/`
- **Run tests**: `make test` or `pytest`

### Development Commands

```bash
make install-dev    # Install development dependencies
make format        # Format code with black
make lint          # Run linters (ruff, pylint)
make test          # Run all tests
make check-full    # Format + lint + test
```

### Adding a New Calculator

1. Create calculator class in `calculators/`
2. Add to `CALCULATORS` tuple in `config_main.py`
3. Add configuration parsing in `config/loader.py`
4. Write tests
5. Update documentation

See `.cursor/development.md` for detailed instructions.

### Common Patterns

- **Empty data handling**: Return `None` or empty DataFrame, log warning
- **Chart generation**: Use `chart_styling_utils` for consistency
- **Error handling**: Use `ConfigError` for configuration issues
- **Logging**: Use appropriate log levels (DEBUG, INFO, WARNING, ERROR)

See `.cursor/patterns.md` for code examples.

## Important Notes

- **Calculator order matters**: See `config_main.py` for execution order
- **Configuration inheritance**: Use `Extends` in YAML configs
- **Data formats**: Support CSV, JSON, XLSX for data; PNG for charts
- **Third-party APIs**: Use Context7 for up-to-date documentation when working with external libraries

For complete documentation, refer to the files in `.cursor/` directory.
